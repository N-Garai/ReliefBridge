{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  <h1>Dashboard</h1>
  <div class="row mb-4">
    <div class="col-md-3"><div class="card bg-primary text-white"><div class="card-body"><h3>{{ my_requests|length }}</h3><p>My Requests</p></div></div></div>
    <div class="col-md-3"><div class="card bg-success text-white"><div class="card-body"><h3>{{ all_requests|length }}</h3><p>Total Active</p></div></div></div>
  </div>
  <a href="{{ url_for('create_request') }}" class="btn btn-danger mb-3">Request Help</a>
  <div class="card">
    <div class="card-header bg-primary text-white"><h5>My Requests</h5></div>
    <div class="card-body">
    {% if my_requests %}
      <table class="table"><thead><tr><th>Type</th><th>Priority</th><th>Status</th><th>Date</th></tr></thead>
      <tbody>
      {% for r in my_requests %}
        <tr><td>{{r.request_type}}</td><td><span class="badge bg-{{'danger' if r.priority=='high' else 'warning'}}">{{r.priority}}</span></td><td>{{r.status}}</td><td>{{r.created_at[:10]}}</td></tr>
      {% endfor %}
      </tbody></table>
    {% else %}
      <p class="text-center text-muted">No requests</p>
    {% endif %}
    </div>
  </div>
</div>
{% endblock %}